{"version":3,"file":"preview-c360c52b.js","sources":["../../src/gallery/row.js","../../src/preview.js"],"sourcesContent":["import { showFullscreenGallery } from './fullscreen'\n\nexport const getGalleryRow = ( mediaItems, popup ) => {\n\tconst galleryRow = document.createElement( 'div' )\n\tgalleryRow.classList.add( 'wikipediapreview-gallery-row' )\n\n\tmediaItems.forEach( item => {\n\t\tconst image = document.createElement( 'div' )\n\n\t\timage.classList.add( 'wikipediapreview-gallery-image' )\n\t\timage.style.backgroundImage = `url(${item.thumb})`\n\t\timage.addEventListener( 'click', ( e ) => {\n\t\t\tconst selected = e.target.style.backgroundImage.slice( 4, -1 ).replace( /\"/g, '' )\n\t\t\tshowFullscreenGallery( mediaItems, selected, popup.lang, popup.dir )\n\t\t} )\n\n\t\tgalleryRow.appendChild( image )\n\t} )\n\n\treturn galleryRow\n}\n","import { msg } from './i18n'\nimport { buildWikipediaUrl } from './utils'\nimport '../style/preview.less'\n\nconst getPreviewHeader = ( lang, imageUrl = '' ) => {\n\treturn `\n\t\t<div class=\"wikipediapreview-header\">\n\t\t\t${imageUrl ? `<div class=\"wikipediapreview-header-image\" style=\"${`background-image:url('${imageUrl}');background-size:cover;`}\"></div>` : ''}\n\t\t\t<div class=\"wikipediapreview-header-wordmark${imageUrl ? ' wikipediapreview-header-wordmark-with-image' : ''} wikipediapreview-header-wordmark-${lang}\"></div>\n\t\t\t<div class=\"wikipediapreview-header-closebtn\"></div>\n\t\t</div>\n`.trim()\n}\n\nconst getPreviewBody = ( type, message, cta ) => {\n\treturn `\n\t\t<div class=\"wikipediapreview-body wikipediapreview-body-${type}\">\n\t\t\t<div class=\"wikipediapreview-body-message\">\n\t\t\t\t<div class=\"wikipediapreview-body-icon\"></div>\n\t\t\t\t\t${message}\n\t\t\t</div>\n\t\t\t<div class=\"wikipediapreview-body-action\">\n\t\t\t\t${cta}\n\t\t\t</div>\n\t\t</div>\n`.trim()\n}\n\nconst render = ( lang, isTouch, dir, headerContent, bodyContent ) => {\n\treturn `\n\t\t<div class=\"wikipediapreview ${isTouch ? 'mobile' : ''}\" lang=\"${lang}\" dir=\"${dir}\">\n\t\t\t${headerContent}\n\t\t\t${bodyContent}\n\t\t</div>\n\t`.trim()\n}\n\nconst renderPreview = ( lang, data, isTouch ) => {\n\tconst imageUrl = data.imgUrl,\n\t\tbodyContent = `\n\t\t\t<div class=\"wikipediapreview-body\">\n\t\t\t\t${data.extractHtml}\n\t\t\t\t<div class=\"wikipediapreview-gallery\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"wikipediapreview-footer\">\n\t\t\t\t<span class=\"wikipediapreview-footer-cta wikipediapreview-footer-cta-readmore\">${msg( lang, 'continue-reading' )}</span>\n\t\t\t\t<a href=\"${buildWikipediaUrl( lang, data.title, isTouch )}\" class=\"wikipediapreview-footer-cta wikipediapreview-footer-cta-readonwiki\" target=\"_blank\">${msg( lang, 'read-more' )}</a>\n\t\t\t</div>\n\t\t`.trim()\n\n\treturn render( lang, isTouch, data.dir, getPreviewHeader( lang, imageUrl ), bodyContent )\n}\n\nconst renderLoading = ( isTouch, lang, dir ) => {\n\tconst bodyContent = `\n\t\t<div class=\"wikipediapreview-body wikipediapreview-body-loading\">\n\t\t\t<div class=\"wikipediapreview-body-loading-line larger\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line medium\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line larger\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line medium\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line smaller\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line larger\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line medium\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line larger\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line medium\"></div>\n\t\t\t<div class=\"wikipediapreview-body-loading-line smaller\"></div>\n\t\t</div>\n\t\t<div class=\"wikipediapreview-footer-loading\"></div>\n\t`.trim()\n\n\treturn render( lang, isTouch, dir, getPreviewHeader( lang ), bodyContent )\n}\n\nconst getReadOnWikiCta = ( lang, title, isTouch ) => {\n\treturn `<a href=\"${buildWikipediaUrl( lang, title, isTouch )}\" target=\"_blank\" class=\"wikipediapreview-cta-readonwiki\">${msg( lang, 'read-on-wiki' )}</a>`\n}\n\nconst renderError = ( isTouch, lang, title, dir ) => {\n\tconst message = `<span>${msg( lang, 'preview-error-message' )}</span>`\n\tconst cta = getReadOnWikiCta( lang, title, isTouch )\n\n\treturn render( lang, isTouch, dir, getPreviewHeader( lang ), getPreviewBody( 'error', message, cta ) )\n}\n\nconst renderDisambiguation = ( isTouch, lang, title, dir ) => {\n\tconst message = `<span>${msg( lang, 'preview-disambiguation-message', title )}</span>`\n\tconst cta = getReadOnWikiCta( lang, title, isTouch )\n\n\treturn render( lang, isTouch, dir, getPreviewHeader( lang ), getPreviewBody( 'disambiguation', message, cta ) )\n}\n\nconst renderOffline = ( isTouch, lang, dir ) => {\n\tconst message = `<span>${msg( lang, 'preview-offline-message' )}</span>`\n\tconst cta = `<a>${msg( lang, 'preview-offline-cta' )}</a>`\n\n\treturn render( lang, isTouch, dir, getPreviewHeader( lang ), getPreviewBody( 'offline', message, cta ) )\n}\n\nexport { renderPreview, renderLoading, renderError, renderDisambiguation, renderOffline }\n"],"names":["getGalleryRow","mediaItems","popup","galleryRow","item","image","e","selected","showFullscreenGallery","getPreviewHeader","lang","imageUrl","getPreviewBody","type","message","cta","render","isTouch","dir","headerContent","bodyContent","renderPreview","data","msg","buildWikipediaUrl","renderLoading","getReadOnWikiCta","title","renderError","renderDisambiguation","renderOffline"],"mappings":"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"}